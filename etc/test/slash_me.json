{
  "configCompleteRedirectUrl": "https://chat.google.com/api/bot_config_complete?token=AAJCfVXOf7nmMlNnhrVT86-W167jo6Pacy4IHbFFaVmhhEVwH-1jviCW8vJPxSRURow3d-JCE0O8Twt7UBpAF__z7jIr3xmkMzX39rfusmUB3heixQaF_9Wn0SSOUwQVFfWRUnQDi9qvSUbJ42Stm8E%3D",
  "eventTime": "2021-03-20T04:55:28.824271Z",
  "message": {
    "argumentText": "/str -tl sffagOJFOIJFWFIWPOFJ",
    "createTime": "2021-03-20T04:55:28.824271Z",
    "name": "spaces/sVBZ8wAAAAE/messages/1RKCICeswk4.1RKCICeswk4",
    "sender": {
      "avatarUrl": "https://lh3.googleusercontent.com/a-/AOh14GjXYpL5CX8SHegBUm50c7V6LNEAli_JHcRUdA6wMw=k",
      "displayName": "Sascha Bast",
      "domainId": "3f8yvml",
      "email": "sascha.bast@dgm-kommunikation.de",
      "name": "users/115408569395812721682",
      "type": "HUMAN"
    },
    "space": {
      "name": "spaces/sVBZ8wAAAAE",
      "singleUserBotDm": true,
      "type": "DM"
    },
    "text": "/cs import json\n\nfrom components.settings_repository.SettingsRepository import SettingsRepository\nfrom task.PrivatTask import PrivatTask\n\n\nclass ConfigEditTask(PrivatTask):\n  parseError = None\n  user_name = None\n  new_user_config = None\n\n  def __init__(self, event, payload):\n    super(ConfigEditTask, self).__init__(event, payload)\n    self.user_name = event['user']['name']\n\n    try:\n      self.new_user_config = json.loads(payload)\n    except Exception as e:\n      self.parseError = {\n        \"save failed\": \"could not parse json [{}] exception [{}]\".format(\n            payload, e)}\n\n  def run(self):\n    if self.parseError == None:\n      settings_reposiory = SettingsRepository()\n      settings_reposiory.set_settings(self.user_name, self.new_user_config)\n    pass\n\n  def get_data(self):\n    print(f'{self.real}+{self.imag}j')\n\n  def get_message(self):\n    response = {\n      \"save success\": self.new_user_config} if self.parseError == None else self.parseError\n    return {\n      \"text\": json.dumps(response)}",
    "thread": {
      "name": "spaces/sVBZ8wAAAAE/threads/1RKCICeswk4",
      "retentionSettings": {
        "state": "PERMANENT"
      }
    }
  },
  "space": {
    "name": "spaces/sVBZ8wAAAAE",
    "singleUserBotDm": true,
    "type": "DM"
  },
  "type": "MESSAGE",
  "user": {
    "avatarUrl": "https://lh3.googleusercontent.com/a-/AOh14GjXYpL5CX8SHegBUm50c7V6LNEAli_JHcRUdA6wMw=k",
    "displayName": "Sascha Bast",
    "domainId": "3f8yvml",
    "email": "sascha.bast@dgm-kommunikation.de",
    "name": "users/115408569395812721682",
    "type": "HUMAN"
  }
}
